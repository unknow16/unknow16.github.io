---
title: 前端模块规范
date: 2018-08-05 19:20:54
tags: Web
---


前端模块规范有三种：CommonJs,AMD和CMD。

- CommonJs用在服务器端
- AMD和CMD用在浏览器环境

---

- AMD 是 RequireJS 在推广过程中对模块定义的规范化产出。
- CMD 是 SeaJS 在推广过程中对模块定义的规范化产出。

---

- AMD:提前执行（异步加载：依赖先执行）+延迟执行
- CMD:延迟执行（运行到需加载，根据顺序执行）

---

## CommonJs
CommonJS是服务器端模块的规范，由Node推广使用。由于服务端编程的复杂性，如果没有模块很难与操作系统及其他应用程序互动。

1. 一个单独的文件就是一个模块。每一个模块都是一个单独的作用域，也就是说，在该模块内部定义的变量，无法被其他模块读取，除非定义为global对象的属性。
1. 输出模块变量的最好方法是使用module.exports对象。
1. 加载模块使用require方法，该方法读取一个文件并执行，返回文件内部的module.exports对象

require 是同步的。模块系统需要同步读取模块文件内容，并编译执行以得到模块接口。

## AMD
AMD是"Asynchronous Module Definition"的缩写，意思就是"异步模块定义"。

由于不是JavaScript原生支持，使用AMD规范进行页面开发需要用到对应的库函数，也就是大名鼎鼎RequireJS，实际上AMD 是 RequireJS 在推广过程中对模块定义的规范化的产出

它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。

RequireJS主要解决两个问题

1. 多个js文件可能有依赖关系，被依赖的文件需要早于依赖它的文件加载到浏览器
1. js加载的时候浏览器会停止页面渲染，加载文件越多，页面失去响应时间越长

## CMD
CMD 即Common Module Definition通用模块定义，CMD规范是国内发展出来的，就像AMD有个requireJS，CMD有个浏览器的实现SeaJS，SeaJS要解决的问题和requireJS一样，只不过在模块定义方式和模块加载（可以说运行、解析）时机上有所不同。

参考：https://www.jianshu.com/p/d67bc79976e6
