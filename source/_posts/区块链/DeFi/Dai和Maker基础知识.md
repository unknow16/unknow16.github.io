---
title: Dai和Maker基础知识
toc: true
date: 2020-12-31 14:14:02
tags:
categories:
---

Dai是基于以太坊ERC20的一个基础稳定货币，即保持 1 Dai = 1 美元，通过数字资产足额抵押担保发行。

MakerDAO是2014 年在以太坊区块链上创建的开源去中心化自治组织。该项目发行一种名为 MKR 的治理型代币，全世界范围内持有该代币的人均可参与项目治理。通过由执行投票（Executive Voting）和治理投票（Governance Polling）组成的科学型治理系统， MKR 持有者可以管理 Maker 协议及 Dai 的金融风险，从而确保该协议的稳定性、透明性和高效性。 MKR 投票权重与投票者存在投票合约 DSChief 中的 MKR 数量成正比。换言之，投票者在 DSChief 合约中锁定的 MKR 代币数量越多，其拥有的决策权就越大。

Maker协议构建在以太坊区块链上，用户可以用其创造货币。该协议目前由稳定币 Dai 、Maker Collateral Vault（Maker 担保物金库）、信息输入系统（Oracle，旧译作 “预言机”）和投票机制组成。MakerDAO 依靠 MKR 持有者的投票决定关键的参数（例如，稳定费率、担保物类型/质押比率等），来治理 Maker 协议。

官网：https://makerdao.com/

## 从Sai到Dai
从 2015 年开始，MakerDAO 与来自全球的开发者开始了对代码、架构和文档的第一版迭代。在 2017 年 12 月，MakerDAO 发布了第一版正式白皮书，介绍了最初的 Dai（也就是如今的 Sai）稳定币系统。

该白皮书介绍了通过名为担保债仓（Collateralized Debt Position, CDP）的独特智能合约 来质押以太币（ETH）生成 Dai 的系统。鉴于以太币是该系统唯一接受的担保资产，生成的 Dai 被称为单担保 Dai （Single-Collateral DAI, SCD），现又称 Sai 。该白皮书还提到了升级该系统的计划，支持包括以太币在内的多种担保资产。该计划已于 2019 年 11 月落实。

Dai 稳定币系统，现称 Maker 协议，目前接受所有基于以太坊、且经过 MKR 持有者批准的资产作为担保物，MKR 持有者还有权投票决定每种担保物的风险参数（Risk Parameter）。投票机制是 Maker 去中心化治理流程的关键一环。

## Dai 生成
所有经过批准的担保品资产都可以存入使用 Maker 协议生成的 Maker 金库智能合约来生成 Dai 。用户可以通过多种用户界面（即网络访问门户）访问 Maker 协议并创建金库。这些用户界面包括 Oasis Borrow 以及由社区构建的各种界面。创建金库并不复杂，但是生成 Dai 意味着用户对系统有了一笔债务；需要归还 Dai 并支付稳定费，才能取回金库中锁定的担保物。

金库本质上是非托管型的：用户可与金库和 Maker 协议直接交互。只要担保物的价格不低于最低必要水平（即清算率（Liquidation Ratio），详见下文），用户即享有对该担保物完整且独立的控制权。

如何与 Maker 金库交互：
1. 创建金库并锁入担保物：用户通过 Oasis Borrow 门户或 Instadapp、Zerion、MyEtherWallet 等由社区创建的界面来创建金库 ，并锁入特定类型和数量的担保物来生成 Dai。存入资金之时，该金库即被视为有担保的。
2. 通过有担保的金库生成 Dai: 将担保品资产锁入一个金库之后，该金库所有者便可使用任意非托管型密码货币钱包来发起、确认交易，生成出一定数量的 Dai。
3. 偿还债务并支付稳定费: 若想取回部分或所有担保物，金库所有者必须部分或全额偿还 TA 所生成的 Dai，并支付 Dai 未偿还期间不断累积的稳定费。稳定费只能用 Dai 支付。
4. 取出担保物: 在偿还了 Dai 并支付了稳定费之后，金库所有者可以将部分或全部担保物退回自己的钱包。在完全偿还了 Dai 并取出所有担保物之后，金库就会空置下来，以待其所有者再次锁入资产。

尤为关键的是，不同的担保品资产需分置在不同的金库中。因此，一些用户会拥有多个金库，采用的担保物类型和担保品率各不相同。

一个应用场景：假设你有一些加密数字资产：如以太币，你不希望卖掉它，但是需要一笔流动性现金，用来消费或者投资更多的数字资产。你可以这样做：
1. 你将 1500 美元的以太锁入 Maker 金库之中，作为担保物。
2. 根据该担保物的风险参数 (假设2/3 的折扣)，可生成 1000 个 Dai，即 1000 美元 。
3. 用 Dai 换成美元或投资其他的资产。
4. 当需要取回担保物(以太币)时，偿还 1000 个 Dai 和极低的利息，拿回以太币并保留获取的收益(来自以太的上涨或用 Dai 投资的收益)。

## 高风险 Maker 金库的清算
为了确保 Maker 协议中始终有充足的担保物来为未偿还债务背书（未偿还债务即以目标价格（Target Price）计算的未偿还 Dai 的总价值），任何（根据 Maker 治理规定的参数）被判定为高风险的 Maker 金库都会通过自动化的 Maker 协议拍卖流程来清算。Maker 协议的判定依据是比较清算率与该金库当前的担保品价值-债务比率（collateral-to-debt ratio）。每种金库类型都有各自的清算率，是 MKR 持有者基于不同担保品资产的风险状况投票决定的。

通过 Maker 协议的拍卖机制，系统在无法获得担保物的价格信息之时依然能对金库进行清算。在进行清算之时，Maker 协议会取出被清算的金库中的担保物，并使用协议内一个基于市场的拍卖机制将其卖出。这被称为担保品拍卖（Collateral Auction）。通过担保物拍卖获得的 Dai 会被用来偿还金库内的债务，其中包括清算罚金（Liquidation Penalty）。MKR 投票者会针对不同的担保物类型设定不同的清算罚金。如果担保物拍卖上获得的 Dai 足以清偿金库内的债务，并足够支付清算罚金，该竞拍会转换成反向担保品竞拍（Reverse Collateral Auction）尽可能地减少担保物的出售数量。剩余的担保物都会物归原主。

如果担保物竞拍获得的 Dai 不足以清偿金库内的债务，亏损部分就会变成 Maker 协议的负债，由 Maker 缓冲金（Maker Buffer) 中的 Dai 偿还。如果缓冲金中没有足够的 Dai ，Maker 协议就会触发债务拍卖（Debt Auction）机制。在债务拍卖期间，系统会铸造新的 MKR（增加流通中的 MKR 量），出售给那些使用 Dai 来参与竞拍的用户。担保物拍卖得到的 Dai 会进入 Maker 缓冲金。Maker 缓冲金可以起到缓冲的作用，避免将来因担保物竞拍不足和 Dai 存款利率上涨而导致 MKR 的增发量过大。如果由竞拍和稳定费获得的 Dai 超过了 Maker 缓冲金的上限（由 Maker 治理设定的值），超出的部分就会通过盈余拍卖（Surplus Auction）出售。在盈余拍卖期间，投标者使用 MKR 来竞拍固定数量的 Dai ，价高者得。一旦盈余拍卖结束，Maker 协议会自动销毁拍卖所得的 MKR ，从而减少 MKR 的总供应量。

## Dai 存款利率（Dai Savings Rate，DSR）
Dai 存款利率让所有 Dai 用户可以自动获得储蓄收益 ，只需用户将他们的 Dai 锁入 Maker 协议的 DSR 合约即可，该合约可以通过 Oasis 的存款平台或其他接入 Maker 协议的平台访问。DSR 合约不对用户设置最低存款要求，用户可以随时从 DSR 合约中取出部分或全部 Dai。

DSR 是一个系统全局参数，决定了 Dai 持有者可基于其存款获得的收益。当 Dai 的市场价格由于市场变化而偏离目标价格时，MKR 持有者可以通过投票更改 DSR 来维护价格的稳定性：如果 Dai 的市场价格超过 1 美元，MKR 持有者可以选择逐渐降低 DSR ，以此减少需求量，进而将 Dai 的市场价格降至 1 美元的目标价格。如果 Dai 的市场价格低于 1 美元，MKR 持有者可以选择逐渐增加 DSR ，以此刺激需求量上升，进而将 Dai 的市场价格增至 1 美元的目标价格。

最初，每周都会有一个 DSR 调整流程。MKR 持有者首先评估并讨论市场参与者提供的公开市场数据和特定数据，然后再投票决定是否有必要调整 DSR 。长期计划是实现 DSR 调整模块（DSR Adjustment Module），即一个可以直接控制 DSR 和基础利率（Base Rate）的即时访问模块（Instant Access Module）。通过该模块，单个 MKR 持有者可以代表一群 MKR 持有者轻松地调整 DSR（调整的幅度范围和频率范围由 MKR 持有者预先设定）。该计划旨在提高 DSR 对瞬息万变的市场状况的灵敏度，并避免过度使用执行投票和治理投票这两个标准治理流程。

## Maker 金库的主要风险参数
每一种 Maker 金库（例如，ETH 金库 和 BAT 金库）都有自己独特的风险参数集，而且是强制生效的。这些参数的决定依据是对担保品的风险预测，而且是直接由 MKR 持有者通过投票决定的。以下是 Maker 金库的主要风险参数：
- 债务上限（Debt Ceiling）:​ 债务上限指的是一种担保品所能生成出债务总额上限。Maker 治理为每一种担保物都设定了债务上限，以确保 Maker 协议的担保物组合具备足够的多样性。一旦某种担保物达到了债务上限，就不可能产生更多债务，除非已有用户偿还部分或全部的金库债务（从而释放出债务空间）。
- 稳定费（Stability Fee）:​ 稳定费是根据一个金库所生成的 Dai 数量来计算的年利息（对生成 Dai 的用户来说，稳定费率相当于贷款的年化利率；对 Maker 协议来说，稳定费率相当于年化的收益率）。稳定费只能由 Dai 支付，发送至 Maker 缓冲金 。
- 清算率（Liquidation Ratio）:​ ​清算率较低，意味着 Maker 治理对担保物价格波动性的预期较低；清算率较高，意味着对价格波动性的预期较高。
- 清算罚金（Liquidation Penalty）:​ 清算罚金是当清算发生时，根据金库中未偿还 Dai 的总量向用户收取的额外一笔费用。清算罚金旨在鼓励金库所有者将质押率保持在适当的水平。
- 担保物拍卖期（Collateral Auction Duration）: 每种 Maker 金库的担保物拍卖时间上限都是 特定的。债务拍卖期和盈余拍卖期则是系统全局参数。
- 竞拍期（Auction Bid Duration）: 单次竞拍结束及终结之前的最低时长。
- 最低加价幅度（Auction Step Size）: 这一风险参数旨在激励拍卖中的早期竞拍者，防止加价幅度过低的情况泛滥。

## 主要的外部参与者
除了智能合约基础设施之外，Maker 协议的运行还需要依靠各类外部参与者群体：看护者（Keeper）、信息输入者（Oracle）、全局清算者（Global Settler，又称 Emergency Oracle，即，紧急信息输入者） 和 Maker 社区成员。清算商属于看护者，是 Maker 协议经济激励机制的受益者；信息输入者和全局清算者都是享有特殊系统权限的外部参与者，其权限由 MKR 持有者通过投票赋予；Maker 社区成员是提供服务的个人和组织。

看护者（Keeper）：看护者是独立的（通常是自动化的）参与者，在套利机会的激励下为去中心化系统的各个方面提供流动性。在 Maker 协议中，看护者指的是帮助 Dai 维持目标价格（1 美元）的市场参与者：他们会在 Dai 的市场价格超出目标价格时将其卖出，并在市场价格低于目标价格之时买入。 在 Maker 金库被清算之时参与盈余拍卖、债务拍卖和担保物拍卖的也称为看护者（清算商）。

价格信息输入机（Price Oracle）：Maker 协议需要实时了解 Maker 金库中充当担保物的资产的市场价格，从而知道何时触发清算机制。Maker 协议的内部担保物价格来自去中心化信息输入架构（decentralized Oracle infrastructure） 。该架构由大量名为 “喂价机（Oracle Feed）” 的独立节点组成。MKR 投票者选出一组可信赖的喂价节点，并由通过以太坊交易向 Maker 系统提供价格信息。群组的节点数量也是由 MKR 投票者来控制的。为了防范攻击者控制大部分喂价机的情况，Maker 协议是通过喂价安全模块（Oracle Security Module, OSM)来获取价格信息的，并不直接通过喂价机获取。喂价安全模块是架设在喂价机节点和 Maker 协议之间的防御层，将价格更新延迟 1 小时。在此期间，如果发现有喂价机被攻击者控制，可通过紧急信息输入者或 Maker 治理投票将其冻结。紧急信息输入者以及价格输入时滞的决策权都在 MKR 持有者手里。

全局清算者/紧急信息输入者（Emergency Oracle）：紧急信息输入者是 MKR 持有者投票选出的，是保护治理流程和其他信息输入者免遭攻击的最后一道防线。紧急预言机能够冻结单个喂价机（例如，ETH 和 BAT 的喂价机），有权单方触发紧急关停机制（Emergency Shutdown）。以此降低大量客户试图在短时间内从 Maker 协议取回资产所产生的风险。

DAO 团队：DAO 团队是由个人和服务提供商组成的，通过 Maker 治理流程（Maker Governance）签订合同来向 MakerDAO 提供特定的服务。DAO 团队的成员都是独立的市场参与者，并非受雇于 Maker 基金会。Maker 治理的灵活性使得 Maker 社区能够调整 DAO 团队框架，基于现实情况和新兴挑战来提供整个生态系统所需的服务。DAO 团队的成员被划分为不同的角色。例如，治理协调员（Governance Facilitator），负责主持沟通和治理流程；风险团队（Risk Team）成员，通过金融风险研究和起草关于引入新型担保物和管理现有担保物的提案来支持 Maker 治理。虽然 Maker 治理到目前为止都是由 Maker 基金会引导的，但是 DAO 有望在不久的将来充分掌握自主权，发起 MKR 投票来填充 DAO 团队中的各种角色。



## 参考资料
> - []()
> - []()
